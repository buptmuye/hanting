{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}生鲜购物中心欢迎您{% endblock %}

{% block page_content %}
<div class="page-header">
    <h1>
    {% if current_user.is_authenticated() %}
     汉亭生鲜购物中心欢迎您 <span class="glyphicon glyphicon-home"></span> {{ current_user.username }}
    {% else %}
      汉亭生鲜购物中心欢迎您 <span class="glyphicon glyphicon-home"></span>
    {% endif %}
    </h1>
</div>

<div class="row">
<div class="col-md-6">
{{ wtf.quick_form(form) }}
</div>
<div class="col-md-6">
			<!-- Sidebar -->
			<aside class="sidebar sidebar-left">

			  <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
			    <!-- Indicators -->
			    <ol class="carousel-indicators">
			      <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
			      <li data-target="#carousel-example-generic" data-slide-to="1"></li>
			      <li data-target="#carousel-example-generic" data-slide-to="2"></li>
			      <li data-target="#carousel-example-generic" data-slide-to="3"></li>
			      <li data-target="#carousel-example-generic" data-slide-to="4"></li>
			    </ol>

			    <!-- Wrapper for slides -->
			    <div class="carousel-inner" role="listbox">
			      <div class="item active">
				<img src="/static/img/bg/divider1.jpg" alt="">
				<div class="carousel-caption">
				  <h3></h3>
				  <p></p>
				</div>
			      </div>
			      <div class="item">
				<img src="/static/img/bg/divider1.jpg" alt="">
				<div class="carousel-caption">
				  <h3></h3>
				  <p></p>
				</div>
			      </div>
			      <div class="item">
				<img src="/static/img/bg/divider1.jpg" alt="">
				<div class="carousel-caption">
				  <h3></h3>
				  <p></p>
				</div>
			      </div>
			      <div class="item">
				<img src="/static/img/bg/divider1.jpg" alt="">
				<div class="carousel-caption">
				  <h3></h3>
				  <p></p>
				</div>
			      </div>
			    </div>

			    <!-- Controls -->
			    <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
			      <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
			      <span class="sr-only">Previous</span>
			    </a>
			    <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
			      <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
			      <span class="sr-only">Next</span>
			    </a>
			  </div>

</div>

</div>
<div class="row">
  <br>
  <h1 class="centered">生鲜优选特供</h1>
  <hr>
  <br>
  <br>
</div><!-- /row -->


  <div class="row">	

  {% for item,image in goods_images %}
    <!-- PORTFOLIO IMAGE 1 -->
    <div class="col-md-4">
      <div class="grid mask">
	<figure>
	  <img class="img-responsive" src="{{ image[0] }}" alt="">
	  <figcaption>
	    <h5>{{ item.name }} <i class="icon-heart"></i><i class="icon-heart"></i><i class="icon-heart"></i> 价格：{{ item.price }}</h5>
	    <div id="test" data-user="{{ item.name }}">
	      <!--这里是关键，一定要动态指定id，似的modal唯一，否则所有的modal都会显示相同的内容，这里我使用item.name唯一确定一个modal，然后在下面的modal初始化中设置id为刚才的item.name，即可，感谢暖神-->
	    <a data-toggle="modal" href="#{{ item.name }}" class="btn btn-primary btn-lg">瞧瞧看</a>
	  </figcaption><!-- /figcaption -->
	</figure><!-- /figure -->
      </div><!-- /grid-mask -->
    </div><!-- /col -->
    
    <!-- MODAL SHOW THE PORTFOLIO IMAGE. In this demo, all links point to this modal. You should create
	 a modal for each of your projects. -->
    
    <div class="modal fade" id="{{ item.name }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
	<div class="modal-content">
	  <div class="modal-header">
	    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
	    <h4 class="modal-title">{{ item.name }}</h4>
	  </div>
	  <div class="modal-body">
	    <p><img class="img-responsive" src="{{ image[1] }}" alt=""></p>
	    <p>{{ item.body }}</p>
	    <p><b><a href="{{ url_for('.goods' ,id=item.id) }}">前往购买</a></b></p>
	    {% if current_user.is_authenticated() and current_user.can(Permission.FOLLOW) %}
	    <a class="btn btn-danger" href="{{ url_for('.cancel_goods', id=item.id) }}">删除该商品</a>
	    <a class="btn btn-primary" href="{{ url_for('.change_goods', id=item.id) }}">修改商品信息</a>
	    {% endif %}
	  </div>
	  <div class="modal-footer">
	    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
	  </div>
	</div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

  {% endfor %}

  </div><!-- /row -->
  <br>
  <br>
<p>
{% for item in testlist %}
{{ item }}, 
{% endfor %}
</p>
{% endblock %}
